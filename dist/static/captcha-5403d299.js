import{_ as c,o as d,c as l}from"./index-61080a5f.js";function h(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function f(){return`rgb(${h(0,255)}, ${h(0,255)}, ${h(0,255)})`}const s=["1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","p","q","r","s","t","u","v","w","x","y","z"],u={name:"VueCaptcha",props:{height:{type:Number,default:40},width:{type:Number,default:100},bgColor:{type:String,default:"#DFF0D8"},charNum:{type:Number,default:4},fontSize:{type:Number,default:25},onChange:{type:Function}},components:{},data(){return{}},computed:{},methods:{generateCaptcha(){let e="";if(this.$refs.canvas){const t=this.$refs.canvas.getContext("2d");if(t){t.clearRect(0,0,this.width,this.height),t.beginPath(),t.fillStyle=this.bgColor,t.fillRect(0,0,this.width,this.height);for(let a=0;a<this.charNum;a++){const i=Math.round(this.width/this.charNum),n=Math.round(i/2)-6,r=s[h(0,s.length-1)];e+=r,t.save(),t.beginPath(),t.fillStyle="white",t.strokeStyle=f(),t.font=`${this.fontSize}px serif`,t.rotate(Math.PI/180*h(-5,5)),t.strokeText(r,n+a*i,this.height/2+8),t.beginPath(),t.moveTo(h(0,this.width),h(0,this.height)),t.lineTo(h(0,this.width),h(0,this.height)),t.stroke(),t.restore()}return e}else return""}else return""},handleChange(e){this.$emit("on-change",e),this.$emit("update:captcha",e)},refreshCaptcha(){const e=this.generateCaptcha();this.handleChange(e)}},mounted(){this.refreshCaptcha()}},g=["height","width"];function p(e,t,a,i,n,r){return d(),l("canvas",{height:a.height,width:a.width,ref:"canvas",onClick:t[0]||(t[0]=(...o)=>r.refreshCaptcha&&r.refreshCaptcha(...o))},null,8,g)}const C=c(u,[["render",p]]);export{C};
