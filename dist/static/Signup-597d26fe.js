import{d as S,u as h,A as f,r as g,o as q,n as B,w as t,E as N,h as b,a as o,g as a,C as K,D as w,L as $,b as A,v as F,z as R,G as T,H as j,M as z,N as D,I as G,J as H,K as J,y as L,q as M,s as O,_ as P}from"./index-61080a5f.js";/* empty css                     *//* empty css                *//* empty css               *//* empty css                     *//* empty css                 *//* empty css               */import{C as Q}from"./captcha-5403d299.js";const W=m=>(M("data-v-1c73f180"),m=m(),O(),m),X={class:"body"},Y=W(()=>b("h1",{style:{"font-family":"幼圆,serif",margin:"10px auto"}},"注册为新用户",-1)),Z=S({__name:"Signup",setup(m){const V=h(),u=f(),i=f();let e=g({r_code:"",form:{nickname:"",uname:"",password:"",confirm_password:"",code:""},errors:{nickname:"",uname:"",password:"",confirm_password:"",code:""}});const C=g({nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],uname:[{required:!0,message:"请输入用户名",trigger:"blur"},{pattern:/^(\w){1,32}$/,message:"用户名应由字母，数字，下划线组成，1-32位",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],confirm_password:[{required:!0,message:"请确认密码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}),c=_=>{if(_){for(let r in e.errors)e.errors[r]="";_.validate(r=>{if(e.form.code&&e.form.code.toUpperCase()!=e.r_code.toUpperCase()){e.errors.code="验证码错误",i.value.refreshCaptcha();return}if(r)A.post("/api/web/sign_up",e.form,{headers:{"content-type":"application/x-www-form-urlencoded"}}).then(l=>{if(l.data.status===!0)V.push("/sign_in");else for(let n in l.data.errors)e.errors[n]=l.data.errors[n][0]}).catch(l=>{console.log(l)});else return!1})}};return(_,r)=>{const l=F,n=R,d=T,p=j,k=z,v=D,y=G,E=H,x=J,I=L,U=N;return q(),B(U,null,{default:t(()=>[b("div",X,[o(I,{class:"card"},{default:t(()=>[o(x,null,{default:t(()=>[o(n,{span:11},{default:t(()=>[o(l,{src:"/media/CAUC.jpg"})]),_:1}),o(n,{span:11,offset:2},{default:t(()=>[Y,o(E,{ref_key:"sign_up_form",ref:u,model:a(e).form,rules:C,"label-width":"80px",class:"form",onKeydown:r[7]||(r[7]=K(s=>c(u.value),["enter"]))},{default:t(()=>[o(p,{error:a(e).errors.nickname,label:"昵称",prop:"nickname"},{default:t(()=>[o(d,{modelValue:a(e).form.nickname,"onUpdate:modelValue":r[0]||(r[0]=s=>a(e).form.nickname=s),clearable:""},null,8,["modelValue"])]),_:1},8,["error"]),o(p,{error:a(e).errors.uname,label:"用户名",prop:"uname"},{default:t(()=>[o(d,{modelValue:a(e).form.uname,"onUpdate:modelValue":r[1]||(r[1]=s=>a(e).form.uname=s),clearable:""},null,8,["modelValue"])]),_:1},8,["error"]),o(p,{error:a(e).errors.password,label:"密码",prop:"password"},{label:t(()=>[w(" 密码 "),o(v,{effect:"dark",content:"密码应由字母，数字，特殊字符组成，至少包含字母和数字，6-64位",placement:"top"},{default:t(()=>[o(k,{style:{margin:"auto"}},{default:t(()=>[o(a($))]),_:1})]),_:1})]),default:t(()=>[o(d,{modelValue:a(e).form.password,"onUpdate:modelValue":r[2]||(r[2]=s=>a(e).form.password=s),"show-password":""},null,8,["modelValue"])]),_:1},8,["error"]),o(p,{error:a(e).errors.confirm_password,label:"确认密码",prop:"confirm_password"},{default:t(()=>[o(d,{modelValue:a(e).form.confirm_password,"onUpdate:modelValue":r[3]||(r[3]=s=>a(e).form.confirm_password=s),"show-password":""},null,8,["modelValue"])]),_:1},8,["error"]),o(p,{error:a(e).errors.code,label:"验证码",prop:"code"},{default:t(()=>[o(n,{span:12},{default:t(()=>[o(d,{modelValue:a(e).form.code,"onUpdate:modelValue":r[4]||(r[4]=s=>a(e).form.code=s)},null,8,["modelValue"])]),_:1}),o(n,{span:12},{default:t(()=>[o(Q,{onOnChange:r[5]||(r[5]=s=>{a(e).r_code=s}),ref_key:"captcha",ref:i},null,512)]),_:1})]),_:1},8,["error"]),o(y,{onClick:r[6]||(r[6]=s=>c(u.value))},{default:t(()=>[w("注册")]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1})])]),_:1})}}});const pe=P(Z,[["__scopeId","data-v-1c73f180"]]);export{pe as default};
