import{d as R,u as L,Q as M,r as U,$,o as r,c as i,a as e,w as s,F as f,b as x,E as A,e as H,h as a,t as _,g as o,n as v,f as E,D as p,p as W,ab as j,ae as q,j as G,a2 as K,a3 as g,I as Q,m as Z,G as J,z as O,N as P,a5 as X,K as Y,q as tt,s as et,Z as ot,a8 as nt,_ as at}from"./index-61080a5f.js";/* empty css                   *//* empty css                     *//* empty css               *//* empty css                 *//* empty css               *//* empty css                 *//* empty css                   *//* empty css               */import{g as lt}from"./my_function-9ea274aa.js";import{W as st}from"./md-editor-v3-2a00f098.js";const u=m=>(tt("data-v-d4ab0848"),m=m(),et(),m),rt=["innerHTML"],ct=u(()=>a("br",null,null,-1)),it={key:2},_t=["href","download"],ut={style:{width:"100%","text-align":"left"}},mt={style:{display:"inline-block"}},dt=u(()=>a("br",null,null,-1)),pt={style:{"font-size":"12px",color:"gray"}},ft=u(()=>a("br",null,null,-1)),gt=u(()=>a("br",null,null,-1)),ht=u(()=>a("br",null,null,-1)),yt={href:"#comment"},wt=R({__name:"ForumDetail",setup(m){L();const k=M();let t=U({forum:G,comments:[K],form:{f_id:0,content:""}});const h=$(()=>{let n=t.forum.annex.split("/");return decodeURI(n[n.length-1])}),V=()=>{navigator.clipboard.writeText(window.location.href),g({message:"复制链接成功，快去分享吧",type:"success"})},y=()=>{x.get(`/api/web/forum/${k.params.fid}`).then(n=>{n.data.status===!0?(t.forum=n.data.forum,t.form.f_id=t.forum.id,t.comments=n.data.comments):console.log("error")}).catch(n=>{console.log(n)})},C=()=>{if(t.form.content===""){g({message:"请输入评论",type:"warning"});return}x.post("/api/web/comment/add",t.form,{headers:{"Content-Type":"multipart/form-data"}}).then(n=>{n.data.status===!0?(g({message:"评论成功",type:"success"}),t.form.content="",y()):console.log("error")}).catch(n=>{console.log(n)})};return t.comments=[],y(),(n,c)=>{const I=ot,d=Q,T=Z,B=J,D=nt,w=O,b=P,F=X,N=Y,S=A,z=H;return r(),i(f,null,[e(S,{"max-height":"100%"},{default:s(()=>[e(N,null,{default:s(()=>[e(w,{span:12,offset:6,style:{"text-align":"left"}},{default:s(()=>[a("h1",null,_(o(t).forum.title),1),o(t).forum.content_type==0?(r(),i("div",{key:0,innerHTML:o(t).forum.rtf_content},null,8,rt)):(r(),v(o(st),{key:1,modelValue:o(t).forum.md_content,"onUpdate:modelValue":c[0]||(c[0]=l=>o(t).forum.md_content=l),"preview-only":"","preview-theme":"github"},null,8,["modelValue"])),(r(!0),i(f,null,E(o(t).forum.keyword,l=>(r(),v(I,{class:"tag"},{default:s(()=>[p(_(l),1)]),_:2},1024))),256)),ct,o(t).forum.annex?(r(),i("span",it,[p(" 附件："+_(h.value)+" ",1),e(d,null,{default:s(()=>[a("a",{href:o(t).forum.annex,download:h.value},"点击下载",8,_t)]),_:1})])):W("",!0),e(T,{"content-position":"left",id:"comment"},{default:s(()=>[p("评论")]),_:1}),a("div",null,[e(B,{modelValue:o(t).form.content,"onUpdate:modelValue":c[1]||(c[1]=l=>o(t).form.content=l),placeholder:"请输入评论",clearable:"",type:"textarea",rows:"3",maxlength:"128","show-word-limit":""},null,8,["modelValue"]),e(d,{type:"primary",onClick:c[2]||(c[2]=l=>C())},{default:s(()=>[p("上传")]),_:1})]),(r(!0),i(f,null,E(o(t).comments,l=>(r(),i("div",ut,[e(D,{src:l.user.head},null,8,["src"]),a("div",mt,[a("span",null,_(l.user.nickname),1),dt,a("span",pt,_(o(lt)(l.time)),1),ft]),gt,a("span",null,_(l.content),1)]))),256))]),_:1}),e(w,{span:6,style:{"text-align":"left"}},{default:s(()=>[e(F,{offset:60},{default:s(()=>[e(b,{effect:"light",content:"分享",placement:"right"},{default:s(()=>[e(d,{type:"warning",icon:o(j),circle:"",size:"large",onClick:V},null,8,["icon"])]),_:1}),ht,e(b,{effect:"light",content:"评论",placement:"right"},{default:s(()=>[a("a",yt,[e(d,{type:"warning",icon:o(q),circle:"",size:"large"},null,8,["icon"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(z,{right:20,bottom:50,target:".el-scrollbar__wrap"})],64)}}});const Nt=at(wt,[["__scopeId","data-v-d4ab0848"]]);export{Nt as default};
